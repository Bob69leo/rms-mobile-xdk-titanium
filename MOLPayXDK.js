var _0xbe58=['transactionRequest','MOLPay\x20transactionRequest\x20paymentDetails\x20=\x20','molpay-mobile-xdk-titanium','/molpay-mobile-xdk-www/index.html','mprunscriptonpopup://','mppinstructioncapture://','MOLPay/nbepay.php','iphone','Platform','osname','createWindow','#bbb','add','please_wait','#fff','auto','center','bold','open','android','duration','show','Utils','Media','saveToPhotoGallery','API','info','saveImageToDevice\x20saveToPhotoGallery\x20success','Image\x20saved','saveImageToDevice\x20saveToPhotoGallery\x20error\x20=\x20','error','Image\x20not\x20saved','createImageView','saveImageToDevice\x20imageDataJsonString\x20=\x20','parse','Android','hasPermission','success','App','addEventListener','app:fromMolpay','data','indexOf','replace','length','base64decode','remove','mprunscriptonpopup,\x20String(data)\x20=\x20','toString','hide','evalJS','mppinstructioncapture,\x20String(data)\x20=\x20','mppinstructioncapture,\x20dataString\x20=\x20','log','nativeWebRequestUrlUpdates,\x20url\x20=\x20','requestPath','stringify','nativeWebRequestUrlUpdates(\x27','\x27);','nativeWebRequestUrlUpdatesOnFinishLoad,\x20url\x20=\x20','nativeWebRequestUrlUpdatesOnFinishLoad(\x27','createBankUiWindow\x20base64HtmlString\x20=\x20','load','extraBankUiWindow\x20load,\x20e.url\x20=\x20','url','updateSdkData(\x27','removeEventListener','startMolpay','module_id','wrapper_version','MOLPay\x20startmolpay\x20paymentDetails\x20=\x20','createWebView','closeMolpay','closemolpay();'];(function(_0x18b02e,_0x29e6c0){var _0x5d2823=function(_0x4de8ee){while(--_0x4de8ee){_0x18b02e['push'](_0x18b02e['shift']());}};_0x5d2823(++_0x29e6c0);}(_0xbe58,0xe0));var _0x8be5=function(_0x4c12ec,_0x2e9103){_0x4c12ec=_0x4c12ec-0x0;var _0x3ae42c=_0xbe58[_0x4c12ec];return _0x3ae42c;};var isInternalDebugging=!0x0,moduleId=_0x8be5('0x0'),wrapperVersion='0',molpaySdkUrl=_0x8be5('0x1'),mpopenmolpaywindow='mpopenmolpaywindow://',mptransactionresults='mptransactionresults://',mpcloseallwindows='mpcloseallwindows://',mprunscriptonpopup=_0x8be5('0x2'),mppinstructioncapture=_0x8be5('0x3'),molpaynbepayurl=_0x8be5('0x4'),molpayPaymentDetails,transactionResultCallback,molpayDiv,mainUiFrame,bankUiWindow,extraBankUiWindow,isClosingMolpay=!0x1,toast=function(_0x120f97,_0x5cde24){if(_0x8be5('0x5')===Ti[_0x8be5('0x6')][_0x8be5('0x7')]){indWin=Titanium['UI'][_0x8be5('0x8')]();var _0x585fe3=Titanium['UI']['createView']({'height':0x96,'width':0xfa,'borderRadius':0xa,'backgroundColor':_0x8be5('0x9'),'opacity':0.8});indWin[_0x8be5('0xa')](_0x585fe3);var _0x34f884=Titanium['UI']['createLabel']({'text':_0x120f97?_0x120f97:L(_0x8be5('0xb')),'color':_0x8be5('0xc'),'width':_0x8be5('0xd'),'height':_0x8be5('0xd'),'textAlign':_0x8be5('0xe'),'font':{'fontSize':0xe,'fontWeight':_0x8be5('0xf')}});_0x585fe3[_0x8be5('0xa')](_0x34f884),indWin[_0x8be5('0x10')](),_0x5cde24=_0x5cde24?_0x5cde24:0x9c4,setTimeout(function(){indWin['close']({'opacity':0x0,'duration':0x3e8});},_0x5cde24);}if(_0x8be5('0x11')===Ti[_0x8be5('0x6')][_0x8be5('0x7')]){var _0x2da6d5=Ti['UI']['createNotification']({'message':_0x120f97?_0x120f97:L(_0x8be5('0xb'))});_0x2da6d5[_0x8be5('0x12')]=Ti['UI']['NOTIFICATION_DURATION_SHORT'],_0x2da6d5[_0x8be5('0x13')]();}},writeImageToDevice=function(_0x48e536){var _0x1773ce=Ti[_0x8be5('0x14')]['base64decode'](_0x48e536['base64ImageUrlData']);if(_0x8be5('0x11')===Ti['Platform']['osname'])Ti[_0x8be5('0x15')][_0x8be5('0x16')](_0x1773ce,{'success':function(_0x3fda9d){isInternalDebugging&&Ti[_0x8be5('0x17')][_0x8be5('0x18')](_0x8be5('0x19')),toast(_0x8be5('0x1a'),0x3e8);},'error':function(_0x456e5b){isInternalDebugging&&Ti[_0x8be5('0x17')][_0x8be5('0x18')](_0x8be5('0x1b'),_0x456e5b[_0x8be5('0x1c')]),toast(_0x8be5('0x1d'),0x3e8);}});else{var _0xa740b9=Ti['UI'][_0x8be5('0x1e')]({'image':_0x1773ce});Ti['Media'][_0x8be5('0x16')](_0xa740b9['toImage'](),{'success':function(_0x921be7){isInternalDebugging&&Ti['API'][_0x8be5('0x18')](_0x8be5('0x19')),toast(_0x8be5('0x1a'),0x3e8);},'error':function(_0x1c9f3d){isInternalDebugging&&Ti[_0x8be5('0x17')][_0x8be5('0x18')](_0x8be5('0x1b'),_0x1c9f3d[_0x8be5('0x1c')]),toast(_0x8be5('0x1d'),0x3e8);}});}},saveImageToDevice=function(_0x11b470){isInternalDebugging&&Ti[_0x8be5('0x17')][_0x8be5('0x18')](_0x8be5('0x1f')+_0x11b470);var _0x29ee38=JSON[_0x8be5('0x20')](_0x11b470);if(_0x29ee38)if(_0x8be5('0x11')===Ti[_0x8be5('0x6')][_0x8be5('0x7')]){var _0x23a7c0='android.permission.WRITE_EXTERNAL_STORAGE',_0x501cc8=Ti[_0x8be5('0x21')][_0x8be5('0x22')](_0x23a7c0);_0x501cc8?writeImageToDevice(_0x29ee38):Ti[_0x8be5('0x21')]['requestPermissions']([_0x23a7c0],function(_0x2370f3){_0x2370f3[_0x8be5('0x23')]?writeImageToDevice(_0x29ee38):isInternalDebugging&&Ti[_0x8be5('0x17')]['info']('requestPermissions\x20error\x20=\x20',_0x2370f3[_0x8be5('0x1c')]);});}else writeImageToDevice(_0x29ee38);};Ti[_0x8be5('0x24')][_0x8be5('0x25')](_0x8be5('0x26'),function(_0x1be318){var _0x4dea14,_0x17e018,_0x153083=_0x1be318[_0x8be5('0x27')];if(String(_0x153083)&&String(_0x153083)[_0x8be5('0x28')](mpopenmolpaywindow)>-0x1)_0x17e018=new RegExp(mpopenmolpaywindow,'g'),_0x4dea14=String(_0x153083)[_0x8be5('0x29')](_0x17e018,''),_0x4dea14&&_0x4dea14[_0x8be5('0x2a')]>0x0&&(isInternalDebugging&&Ti[_0x8be5('0x17')][_0x8be5('0x18')]('inAppCallback\x20base64HtmlString\x20=\x20'+_0x4dea14),createBankUiWindow(_0x4dea14));else if(String(_0x153083)&&String(_0x153083)['indexOf'](mptransactionresults)>-0x1){if(_0x17e018=new RegExp(mptransactionresults,'g'),_0x4dea14=String(_0x153083)['replace'](_0x17e018,''),_0x4dea14&&_0x4dea14[_0x8be5('0x2a')]>0x0){var _0x21952c=Ti['Utils'][_0x8be5('0x2b')](_0x4dea14)['toString'](),_0x102926=JSON['stringify'](JSON[_0x8be5('0x20')](_0x21952c));transactionResultCallback(_0x102926),isClosingMolpay&&(molpayDiv[_0x8be5('0x2c')](mainUiFrame),bankUiWindow&&molpayDiv[_0x8be5('0x2c')](bankUiWindow),extraBankUiWindow&&molpayDiv[_0x8be5('0x2c')](extraBankUiWindow),isClosingMolpay=!0x1);}}else if(String(_0x153083)&&String(_0x153083)[_0x8be5('0x28')](mpcloseallwindows)>-0x1)bankUiWindow&&molpayDiv[_0x8be5('0x2c')](bankUiWindow),extraBankUiWindow&&molpayDiv['remove'](extraBankUiWindow);else if(String(_0x153083)&&String(_0x153083)[_0x8be5('0x28')](mprunscriptonpopup)>-0x1){if(isInternalDebugging&&Ti[_0x8be5('0x17')][_0x8be5('0x18')](_0x8be5('0x2d')+String(_0x153083)),_0x17e018=new RegExp(mprunscriptonpopup,'g'),_0x4dea14=String(_0x153083)['replace'](_0x17e018,''),_0x4dea14&&_0x4dea14[_0x8be5('0x2a')]>0x0){var _0x12d9f2=Ti[_0x8be5('0x14')]['base64decode'](_0x4dea14)[_0x8be5('0x2e')]();isInternalDebugging&&Ti[_0x8be5('0x17')][_0x8be5('0x18')]('mprunscriptonpopup,\x20jsString\x20=\x20'+_0x12d9f2),extraBankUiWindow?(extraBankUiWindow[_0x8be5('0x2f')](),extraBankUiWindow[_0x8be5('0x30')](_0x12d9f2)):bankUiWindow&&(bankUiWindow['hide'](),bankUiWindow['evalJS'](_0x12d9f2));}}else if(String(_0x153083)&&String(_0x153083)[_0x8be5('0x28')](mppinstructioncapture)>-0x1&&(isInternalDebugging&&Ti[_0x8be5('0x17')][_0x8be5('0x18')](_0x8be5('0x31')+String(_0x153083)),_0x17e018=new RegExp(mppinstructioncapture,'g'),_0x4dea14=String(_0x153083)[_0x8be5('0x29')](_0x17e018,''),_0x4dea14&&_0x4dea14[_0x8be5('0x2a')]>0x0)){var _0xaad57a=Ti[_0x8be5('0x14')][_0x8be5('0x2b')](_0x4dea14)[_0x8be5('0x2e')]();isInternalDebugging&&Ti['API'][_0x8be5('0x18')](_0x8be5('0x32')+_0xaad57a),saveImageToDevice(_0xaad57a);}});var inAppCallback=function(_0x1dbe40){Ti[_0x8be5('0x24')]['fireEvent'](_0x8be5('0x26'),{'data':_0x1dbe40});},nativeWebRequestUrlUpdates=function(_0x3f95d1){isInternalDebugging&&console[_0x8be5('0x33')](_0x8be5('0x34')+_0x3f95d1);var _0xf62345={};_0xf62345[_0x8be5('0x35')]=_0x3f95d1;var _0x303a63=JSON[_0x8be5('0x36')](_0xf62345);mainUiFrame[_0x8be5('0x30')](_0x8be5('0x37')+_0x303a63+_0x8be5('0x38'));},nativeWebRequestUrlUpdatesOnFinishLoad=function(_0x5592d7){isInternalDebugging&&console[_0x8be5('0x33')](_0x8be5('0x39')+_0x5592d7);var _0x26551a={};_0x26551a[_0x8be5('0x35')]=_0x5592d7;var _0xc2582a=JSON['stringify'](_0x26551a);mainUiFrame[_0x8be5('0x30')](_0x8be5('0x3a')+_0xc2582a+_0x8be5('0x38'));},createBankUiWindow=function(_0x390608){if(Ti[_0x8be5('0x17')]['info'](_0x8be5('0x3b')+_0x390608),molpayDiv){var _0x4975e6='data:text/html;base64,'+_0x390608;bankUiWindow=Ti['UI']['createWebView']({'url':_0x4975e6,'disableBounce':!0x0,'loading':!0x0}),bankUiWindow['onCreateWindow']=function(_0x5be871){return extraBankUiWindow=Ti['UI']['createWebView']({'disableBounce':!0x0,'loading':!0x0}),molpayDiv[_0x8be5('0xa')](extraBankUiWindow),extraBankUiWindow['addEventListener'](_0x8be5('0x3c'),function(_0x56a914){isInternalDebugging&&console[_0x8be5('0x33')](_0x8be5('0x3d')+_0x56a914[_0x8be5('0x3e')]);String(_0x56a914[_0x8be5('0x3e')])&&nativeWebRequestUrlUpdates(_0x56a914[_0x8be5('0x3e')]);}),extraBankUiWindow;},bankUiWindow[_0x8be5('0x25')](_0x8be5('0x3c'),function(_0x2fadfb){isInternalDebugging&&console['log']('bankUiWindow\x20load,\x20e.url\x20=\x20'+_0x2fadfb[_0x8be5('0x3e')]);String(_0x2fadfb[_0x8be5('0x3e')])&&String(_0x2fadfb[_0x8be5('0x3e')])[_0x8be5('0x28')](molpaynbepayurl)>-0x1?bankUiWindow['evalJS']('popout\x20=\x20function(){document.getElementsByTagName(\x27form\x27)[0].submit()};'):String(_0x2fadfb[_0x8be5('0x3e')])&&nativeWebRequestUrlUpdates(_0x2fadfb[_0x8be5('0x3e')]);}),molpayDiv[_0x8be5('0xa')](bankUiWindow);}},mainUiFrameOnloadHandler=function(_0x7ea530){mainUiFrame['evalJS'](_0x8be5('0x3f')+JSON[_0x8be5('0x36')](molpayPaymentDetails)+'\x27,'+inAppCallback+');'),mainUiFrame[_0x8be5('0x40')](_0x8be5('0x3c'),mainUiFrameOnloadHandler);};exports['setMolpayView']=function(_0x3a8c13){molpayDiv=_0x3a8c13;},exports[_0x8be5('0x41')]=function(_0x1a5af7,_0x261cdd){isClosingMolpay=!0x1;try{molpayPaymentDetails=JSON[_0x8be5('0x20')](_0x1a5af7);}catch(_0x56d7eb){molpayPaymentDetails=_0x1a5af7;}molpayPaymentDetails[_0x8be5('0x42')]=moduleId,molpayPaymentDetails[_0x8be5('0x43')]=wrapperVersion,isInternalDebugging&&console[_0x8be5('0x33')](_0x8be5('0x44')+JSON[_0x8be5('0x36')](_0x1a5af7)+',\x20callback\x20=\x20'+_0x261cdd),transactionResultCallback=_0x261cdd,mainUiFrame=Ti['UI'][_0x8be5('0x45')]({'url':molpaySdkUrl,'disableBounce':!0x0,'loading':!0x0}),mainUiFrame[_0x8be5('0x25')]('load',mainUiFrameOnloadHandler),molpayDiv&&molpayDiv[_0x8be5('0xa')](mainUiFrame);},exports[_0x8be5('0x46')]=function(){mainUiFrame[_0x8be5('0x30')](_0x8be5('0x47'));},exports[_0x8be5('0x48')]=function(_0x4fdf79,_0x4bd95b){isClosingMolpay=!0x0;try{molpayPaymentDetails=JSON[_0x8be5('0x20')](_0x4fdf79);}catch(_0x2f6770){molpayPaymentDetails=_0x4fdf79;}molpayPaymentDetails[_0x8be5('0x42')]=moduleId,molpayPaymentDetails['wrapper_version']=wrapperVersion,isInternalDebugging&&console['log'](_0x8be5('0x49')+JSON[_0x8be5('0x36')](_0x4fdf79,null,'')),transactionResultCallback=_0x4bd95b,mainUiFrame=Ti['UI'][_0x8be5('0x45')]({'url':molpaySdkUrl,'disableBounce':!0x0}),mainUiFrame[_0x8be5('0x25')](_0x8be5('0x3c'),mainUiFrameOnloadHandler),molpayDiv&&molpayDiv['add'](mainUiFrame);};